function redux_add_file(e,i){e.preventDefault();var d,t=jQuery(this);return d?(d.open(),void 0):(d=wp.media({multiple:!1,library:{type:"image"},title:t.data("choose"),button:{text:t.data("update")}}),d.on("select",function(){var e=d.state().get("selection").first();d.close(),"image"===e.attributes.type&&(i.find(".upload").val(e.attributes.url).trigger("check_dependencies",i.find(".upload")),i.find(".upload-id").val(e.attributes.id),i.find(".upload-height").val(e.attributes.height),i.find(".upload-width").val(e.attributes.width),"image"!==e.attributes.type||i.find(".upload").hasClass("noPreview")||i.find(".screenshot").empty().hide().append('<img class="redux-option-image" src="'+e.attributes.url+'">').slideDown("fast"),i.find(".remove-image").removeClass("hide"),i.find(".redux-background-properties").slideDown())}),d.open(),void 0)}function redux_remove_file(e){if(e.find(".remove-image").addClass("hide")){redux_change(jQuery("#"+e.attr("rel"))),e.find(".remove-image").addClass("hide"),e.find(".upload").val("").trigger("check_dependencies",e.find(".upload")),e.find(".upload-id").val(""),e.find(".upload-height").val(""),e.find(".upload-width").val(""),e.find(".redux-background-properties").hide();var i=e.find(".screenshot");i.slideUp(),e.find(".remove-file").unbind(),jQuery(".section-upload .upload-notice").length>0&&jQuery(".media_upload_button").remove()}}!function(e){"use strict";e.redux=e.redux||{},e(document).ready(function(){e.redux.media()}),e.redux.media=function(){e(".remove-image, .remove-file").unbind("click").on("click",function(){redux_remove_file(e(this).closest("td")),redux_change(e(this).closest("td:first").find(".upload"))}),e(".media_upload_button").unbind().on("click",function(i){redux_add_file(i,e(this).closest("td")),redux_change(e(this).closest("td:first").find(".upload"))})}}(jQuery);