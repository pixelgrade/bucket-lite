!function(e){function t(){e(window).scrollTop()>20?e("#redux-container").addClass("fixed-header"):e("#redux-container").removeClass("fixed-header")}e(document).ready(function(){var t=jQuery("#wpGrade_import_demodata_button"),o=jQuery("#redux-form-wrapper"),n={container:o,ajaxUrl:e("input[name=wpGrade_import_ajax_url]",o).val(),optionSlug:e("input[name=wpGrade_options_page_slug]",o).val(),nonceImportPostsPages:e("input[name=wpGrade-nonce-import-posts-pages]",o).val(),nonceImportThemeOptions:e("input[name=wpGrade-nonce-import-theme-options]",o).val(),nonceImportWidgets:e("input[name=wpGrade-nonce-import-widgets]",o).val(),ref:e("input[name=_wp_http_referer]",o).val()};t.bind("click",{set:n},function(t){function o(){for(u=0;c>u;)u++,m.Queue({type:"POST",url:a.ajaxUrl,data:{action:"wpGrade_ajax_import_posts_pages",_wpnonce:a.nonceImportPostsPages,_wp_http_referer:a.ref,step_number:u,number_of_steps:c}}).fail(function(e){l=e,d=wpAjax.parseAjaxResponse(e,"notifier"),p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed...</i><br />')}).done(function(e){l=e,d=wpAjax.parseAjaxResponse(e,"notifier"),null!=d&&null!=d.errors?0==d.errors?null!=d.responses[0]?(p.append("<i>Finished importing the demo posts, pages, custom posts... | Step "+d.responses[0].supplemental.stepNumber+" of "+d.responses[0].supplemental.numberOfSteps+"</i><br />"),p.append('<div style="display:none;visibility:hidden;">Return data:<br />'+d.responses[0].data+"</div>")):p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed</i><br />'):null!=d.responses[0]?p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed</i><br />(The script returned the following message: '+d.responses[0].errors[0].message+" )<br/>"):p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed</i><br />'):p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed. You can reload the page and try again.</i><br />')})}function n(){m.Queue({type:"POST",url:a.ajaxUrl,data:{action:"wpGrade_ajax_import_theme_options",_wpnonce:a.nonceImportThemeOptions,_wp_http_referer:a.ref}}).fail(function(e){l=e,d=wpAjax.parseAjaxResponse(e,"notifier"),p.append('<i style="color:red">The importing of the theme options has failed...</i><br />')}).done(function(e){l=e,d=wpAjax.parseAjaxResponse(e,"notifier"),null!=d&&null!=d.errors?0==d.errors?(p.append("<i>Finished importing the demo theme options...</i><br />"),p.append('<div style="display:none;visibility:hidden;">Return data:<br />'+d.responses[0].data+"</div>")):p.append('<i style="color:red">The importing of the theme options has failed</i><br />(The script returned the following message: '+d.responses[0].errors[0].message+" )<br/><br/>"):p.append('<i style="color:red">The importing of the theme options has failed</i><br />')})}function r(){m.Queue({type:"POST",url:a.ajaxUrl,data:{action:"wpGrade_ajax_import_widgets",_wpnonce:a.nonceImportWidgets,_wp_http_referer:a.ref}}).fail(function(){l=response,d=wpAjax.parseAjaxResponse(response,"notifier"),p.append('<i style="color:red">The setting up of the demo widgets failed...</i><br />')}).done(function(e){l=e,d=wpAjax.parseAjaxResponse(e,"notifier"),null!=d&&null!=d.errors?0==d.errors?(p.append("<i>Finished setting up the demo widgets...</i><br />"),p.append('<div style="display:none;visibility:hidden;">Return data:<br />'+d.responses[0].data+"</div>")):p.append('<i style="color:red">The setting up of the demo widgets failed</i><br />(The script returned the following message: '+d.responses[0].errors[0].message+" )<br/><br/>"):p.append('<i style="color:red">The setting up of the demo widgets failed</i><br />')})}var i=e(this),a=t.data.set,s=(e(".wpGrade_import_demodata_wait",a.container),!0),p=e(".wpGrade-import-results",a.container);if(i.is(".wpGrade_button_inactive"))return!1;if(s=confirm("Importing the demo data will overwrite your current Theme Options settings. Proceed anyway?"),0==s)return!1;var l=null,d=null,u=0,c=10,m=e.qjax({timeout:3e3,ajaxSettings:{type:"POST",url:ajaxurl},onQueueChange:function(t){0==t&&(0==d.errors?(setTimeout(function(){e(".wpGrade-loading-wrap",a.container).slideUp(400)},1e3),setTimeout(function(){p.append("<i>All done!</i><br />")},1e3),setTimeout(function(){e("body").wpGrade_popup({title:"Phew...that was a hard one!",text:"The demo data was imported without a glitch! Awesome! <br/><br/>Remember to update the passwords and roles of imported users. <br/>Also don't forget to change the email address in the Contact Form 7 form. <br/><br/><i>We will now reload the page so you can see the brand new data!</i>",time_to_show:12e3},function(){window.location.hash="#wpwrap",window.location.reload(!0)})},2e3)):(i.removeClass("button-disabled"),e(".wpGrade-loading-wrap",a.container).slideUp().addClass("hidden"),e("body").wpGrade_popup({popup_class:"error",title:"Total Bummer...",text:"The import didn't work completely! <br/> Check out the errors given. You might want to try reloading the page and then try again.",time_to_show:5e3})))},onError:function(){null!=d.errors&&0!=d.errors&&m.Clear()},onStop:function(){null!=d.errors&&0!=d.errors&&m.Clear()}});return e(".wpGrade-loading-wrap",a.container).css({opacity:0,display:"block",visibility:"visible"}).removeClass("hidden").animate({opacity:1}),i.addClass("button-disabled"),p.removeClass("hidden"),p.append("<br /><i>Working...</i><br />"),n(),r(),o(),!1})}),e.fn.wpGrade_popup=function(t,o){var n={popup_class:"success",title:"Notification",text:"All things are good! Carry on...",time_to_show:3e3},r=e.extend(n,t);return this.each(function(){var t=e(this),n=e("<div/>").addClass("wpGrade_popup wpGrade_popup_"+r.popup_class).css("opacity",0).html('<div class="wpGrade_popup_title"><span class="wpGrade_popup_icon"></span> '+r.title+'</div><div class="wpGrade_popup_content">'+r.text+"</div>").appendTo(t);n.animate({opacity:1},function(){n.delay(r.time_to_show).fadeOut(function(){n.remove(),"function"==typeof o&&o()})})})},function(e){e.qjax=function(t){var o=e.extend({timeout:null,onStart:null,onStop:null,onError:null,onTimeout:null,onQueueChange:null,queueChangeDelay:0,ajaxSettings:{contentType:"application/x-www-form-urlencoded; charset=UTF-8",type:"GET"}},t),n=[],r=null,i=null,a=this,s=!1,p=function(){s||(s=!0,o.onTimeout&&o.timeout&&e.isFunction(o.onTimeout)&&(i&&clearTimeout(i),i=setTimeout(e.proxy(function(){o.onTimeout.call(this,r.options)},this),o.timeout)),o.onStart&&e.isFunction(o.onStart)&&o.onStart(this,r.options))},l=function(){s&&n.length<=0&&(s=!1,i&&clearTimeout(i),o.onStop&&e.isFunction(o.onStop)&&o.onStop(this,r.options))},d=function(){if(o.onQueueChange&&o.onQueueChange.call(a,n.length),n.length>=1&&!r)if(r=n.shift(),r.options.isCallback)r.options.complete();else{p();var t=e.ajax(r.options);for(var i in r.promise)for(var s in r.promise[i])t[i].call(this,r.promise[i][s])}},u=function(e,t,o){this.options=e,this.complete=t,this.context=o,this.promise={done:[],then:[],always:[],fail:[]}};return u.prototype._promise=function(e,t){return this.promise[e]&&this.promise[e].push(t),this},u.prototype.done=function(e){return this._promise("done",e)},u.prototype.then=function(e){return this._promise("then",e)},u.prototype.always=function(e){return this._promise("always",e)},u.prototype.fail=function(e){return this._promise("fail",e)},this.Clear=function(){n=[]},this.Queue=function(t,i){var a={},s=null;t instanceof Function?(a={isCallback:!0},s=t):(a=e.extend({},o.ajaxSettings,t||{}),s=a.complete),a.complete=function(t,n){"error"==n&&o.onError&&e.isFunction(o.onError)&&o.onError.call(r.context||this,t,n),r&&(r.complete&&r.complete.call(r.context||this,t,n),l(),r=null,d())};var t=new u(a,s,i);return n.push(t),setTimeout(d,o.queueChangeDelay),t},this}}(jQuery),e("#redux-container").parent().addClass("redux-bai"),e(window).scroll(t),t()}(jQuery);