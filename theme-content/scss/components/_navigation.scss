/*------------------------------------*\
               NAVIGATION
\*------------------------------------*/

.navigation {
    background-color: $dark;
    @include font-size(14px);
}

.navigation--top {
    a {
        color: #a6a1a1;
    }
}

.navigation--main a{
    color: white;
}

@include media(to hand) {
    .navigation{
        background-color: transparent;
    }

    .site-navigation--header{

        > .menu-item{
            border-bottom: 1px solid $light;

            &.current-menu-item,
            &.current-menu-ancestor,
            &.current-menu-parent{
                a{
                    color: $red;
                }
            }            
        }

        .menu-link{
            color: black;
            @include rem(padding, $_u2 0 $_u2 $_u2);

            &:hover, &:focus, &:active {
                color: white;
                background: $light;
            }            
        }
    }
}


/*ul*/.site-navigation--main, .translation-bar {
    @extend .nav;
    text-transform: uppercase;
    position: relative;
}

    /*li*/.menu-item--main, .translation-item {
        position: relative;

        > a {
            display: block;
            @include rem(padding, 1.2*$_u4 $_u);
        }

        &.current-menu-item,
        &.current-menu-ancestor,
        &.current-menu-parent,
        &:hover, &:focus, &:active {
        }
        
        &:hover > .site-navigation__sub-menu {
            display: block;
        }
    }






/*----------------------------------------*\
    $SUBMENUS
\*----------------------------------------*/

.site-navigation__sub-menu {
    @extend .nav;
    @extend .nav--stacked;
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 300;
    background-color: $dark;
    @include rem(width, 240px);

    @include media(to hand) {
        display: block;
        position: static;
        background-color: transparent;
        @include rem(padding-left, $_u);
        margin-right: 0;
        width: 100%;
    }
}

.sub-menu__posts {
    background-color: black;
    background-clip: padding-box;
    @include rem(border-bottom, $_u solid rgba(black, .5));
    @include rem(padding, $_u4);
    width: 100%;
    position: absolute;
    left: 0;
    z-index: 300;
    display: none;

    .site-navigation__sub-menu {
        position: static;
        display: block;
    }

    .grid {
        @include rem(margin-bottom, -$_u);
    }

    .article--billboard-small {
        background-color: #262525;
        width: auto;
        position: static;
        margin: 0;

        .small-link {
            color: $light;

            &:after {
                content: " +";
                color: $red;
            }

            &:hover {
                color: white;
            }
        }
    }
}

.grid--thin {
    @include rem(margin-left, -$_u4);

    > .grid__item {
        @include rem(padding-left, $_u4);
    }
}

.site-navigation--top a, .translation-bar a{
    @include font-size(12px);
}

@include media(from hand) {
    .site-navigation--header .menu-item--main{
        &:hover, &:focus, &:active {
            > a{
                color: white;
                background: $gray;
            }

            @include media(from hand) {
                border-bottom: 0 solid $red;
                @include rem(border-bottom-width, 5px);
                @include rem(margin-bottom, -5px);   
            }
        }    
    }
}

.site-navigation--top, .translation-bar{
    li:last-child:after{
        border-right: 0;
    }

    li{
        &:after{
            content: '';
            border-right: 1px $light dotted;
        }
    }
}

.site-navigation--top > li:first-child a{
    @include rem(margin-left, -$_u);
}

.site-navigation__sub-menu li{
    &:after{
        border: 0;
    }
    
    a{
        margin-left: 0 !important;
    }
}

.translation-bar{
    li:last-child a{
        @include rem(margin-right, -$_u);
    }    
}

.translation-bar-container{
    text-align: right;
}





/*----------------------------------------*\
    $MOBILE NAVIGATION
\*----------------------------------------*/
@include media(to hand) {
    #page{
        overflow: hidden;
    }

    .header{
        position: absolute;
        width: 100%;
    }

    .site-header{
        height: 4rem;
    }

    .navigation--top{
        display: none;
    }

    .navigation--main{
        display: none;
    }

    .header-bar-container{
        display: none;
    }

    .site-navigation--main{
        > li{
            display:list-item;

            > a{
                display:block;
            }
        }        
    }

    .site-navigation--header{
        @include rem(margin-left, $_u);
    }

    .container--main{
        padding-top: 4.5rem;
    }   

    
    .container--main-header{
        display: block;

        .site-header{
            display: inline-block;
        }

        .nav-trigger{
            display: inline-block;
            float: right;
        }
    }

}

    /*li*/.menu-item--parent {
        position: relative;

        &:after {
            content: "";
            width: 0;
            height: 0;
            position: absolute;
            @include rem(top, $base-spacing-unit - 2px);
            @include rem(right, $half-spacing-unit);
            @include rem(border, 5px solid transparent);
            border-top-color: #4d4d4d;
            pointer-events: none;
            // @include transition(all .2s bezier(easeInOutCirc));

            .header-transparent & {
                @include rem(top, 3/2 * $half-spacing-unit - 2px);
            }
        }

        // & > a {
        //     @include transition(color .2s bezier(easeInOutCirc));
        // }

        @include media(from hand) {
            & > ul {
                display: none;
            }

            .touch & > ul {
                display: block;
            }
        }
    }

.navigation--mobile{
    height: 900px;
    right: 0;
    width: 75%;
    top: 0;
    position: absolute;
    visibility: hidden;
    z-index: -1;
    -webkit-transition: visibility 0s linear .2s;

    background-color: $dark;

    .site-navigation--header{
        @include rem(margin-right, $_u);

        .menu-link{
            color: white;
        }

        > .menu-item{
            border-bottom: 1px solid $light;
        }
    }
}

.wrapper {
    height: 100%;
    min-height: 350px;

    position: relative;
        
    background-color: white; 
    z-index: 1;
    @include transform(translateX(0));
    @include transform(translateZ(0));
    @include transition(transform .25s ease-in-out);
}

.site-navigation__trigger {
    display: none;
    // -webkit-tap-highlight-color:rgba(0,0,0,0);
    @include transition(color 1s ease-in-out);

    &:active, &:focus {
        color: white;
        @include transition(color .1s ease-in-out);
    }

    @include media(to hand) {
        display: block;
        @include rem(width, 3*$base-spacing-unit);
        @include rem(height, 3*$base-spacing-unit);
        position: absolute;
        top: 0; right: 0;
        @include font-size(42px);
        text-align: center;
        cursor: pointer;
        color: #807f7d;
    }

    i {
        display: block;
        position: absolute;
        @include rem(top, $half-spacing-unit + 2px);
        @include rem(left, $half-spacing-unit);
        overflow: hidden;
    } 

    .icon-reorder {
        @include transition(opacity .2s, transform .3s);
    }

    .icon-remove {
        @include transition(opacity .2s, transform .4s);
        @include transform(rotate(45deg));
        @include opacity(0);
    }
}

.navigation--is-visible {

    .navigation--mobile{
        height: 100%;
        visibility: visible;
        z-index: 1;
        -webkit-transition: z-index 0s linear .2s;
        overflow-y: scroll;        
    }

    .wrapper {
        @include transform(translateX(-75%));
        position: absolute;
        min-width: 320px;
    }

    .icon-remove {
        @include transform(none);
        @include opacity(1);
    }

    .icon-reorder {
        @include transform(rotate(-45deg));
        @include opacity(0);
    }    
}




